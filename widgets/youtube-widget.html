<div class="social-widget">
	<h2 class="widget-title">
		<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-left: 8px;">
			<path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path>
			<polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>
		</svg>
		تابعنا على يوتيوب
	</h2>
	<a href="https://www.youtube.com/@tarfiehplus" target="_blank" class="social-link">
		<div class="youtube-banner" style="background-color: #2a2a2a; border-radius: 8px; padding: 15px; display: flex; align-items: center; justify-content: center; margin-bottom: 15px;">
			<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="#ff0000" stroke="#ff0000" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" style="margin-left: 15px;">
				<path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path>
				<polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02" fill="#ffffff"></polygon>
			</svg>
			<div style="text-align: right;">
				<div style="font-weight: bold; font-size: 18px; margin-bottom: 5px;">قناة الآن على يوتيوب</div>
				<div style="font-size: 14px; opacity: 0.8;">شاهد أحدث الفيديوهات والتقارير</div>
			</div>
		</div>
		<div class="follow-button" style="background-color: #ff0000;">
			<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-left: 5px;">
				<path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path>
				<polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02" fill="#ffffff"></polygon>
			</svg>
			اشترك الآن
		</div>
	</a>

	<!-- Loading Indicator for YouTube -->
	<div id="youtube-loading" class="loading-indicator" style="display: flex; justify-content: center; align-items: center; flex-direction: column; width: 100%;">
		<div class="loading-spinner"></div>
		<p>جاري تحميل فيديوهات يوتيوب...</p>
	</div>

	<!-- Primary: YouTube API Gallery -->
	<div id="youtube-api-container">
		<!-- YouTube videos will be loaded here via the YouTube API -->
	</div>

	<!-- Fallback: Standard YouTube Embed -->
	<div id="youtube-fallback" style="display:none;">
		<iframe width="100%"
		        height="550"
		        src="https://www.youtube.com/embed/videoseries?list=UU_aTQkYxgwsD-cTs5iKP_CQ&index=1&max-results=12&sort=dd&order=date"
		        frameborder="0"
		        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
		        allowfullscreen
		        loading="lazy">
		</iframe>
	</div>

	<!-- Final Fallback: Static YouTube Content -->
	<div id="youtube-static-fallback" class="static-fallback" style="display:none;">
		<h3>
			<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-left: 8px;">
				<path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path>
				<polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>
			</svg>
			آخر الفيديوهات من يوتيوب
		</h3>
		
		<!-- Featured Video -->
		<div class="static-fallback-featured">
			<a href="https://www.youtube.com/watch?v=Ks0Vk4jKkhk" target="_blank">
				<img src="https://i.ytimg.com/vi/Ks0Vk4jKkhk/hqdefault.jpg" alt="ترفيه بلس - حلقة جديدة">
				<div class="static-fallback-title" style="font-size: 18px; padding: 16px;">ترفيه بلس - حلقة جديدة</div>
			</a>
		</div>
		
		<!-- Regular Videos Grid -->
		<div class="static-fallback-grid">
			<div class="static-fallback-item">
				<a href="https://www.youtube.com/watch?v=qXYl5I6j_Xo" target="_blank">
					<img src="https://i.ytimg.com/vi/qXYl5I6j_Xo/hqdefault.jpg" alt="أخبار الفن والمشاهير">
					<div class="static-fallback-title">أخبار الفن والمشاهير</div>
				</a>
			</div>
			<div class="static-fallback-item">
				<a href="https://www.youtube.com/watch?v=7JdCTIE4kQE" target="_blank">
					<img src="https://i.ytimg.com/vi/7JdCTIE4kQE/hqdefault.jpg" alt="تقرير خاص - أحداث الساعة">
					<div class="static-fallback-title">تقرير خاص - أحداث الساعة</div>
				</a>
			</div>
			<div class="static-fallback-item">
				<a href="https://www.youtube.com/watch?v=LYU-8IFcDPw" target="_blank">
					<img src="https://i.ytimg.com/vi/LYU-8IFcDPw/hqdefault.jpg" alt="ترفيه بلس - مقابلة حصرية">
					<div class="static-fallback-title">ترفيه بلس - مقابلة حصرية</div>
				</a>
			</div>
			<div class="static-fallback-item">
				<a href="https://www.youtube.com/watch?v=V5E8kJo5gNk" target="_blank">
					<img src="https://i.ytimg.com/vi/V5E8kJo5gNk/hqdefault.jpg" alt="ترفيه بلس - تغطية خاصة">
					<div class="static-fallback-title">ترفيه بلس - تغطية خاصة</div>
				</a>
			</div>
			<div class="static-fallback-item">
				<a href="https://www.youtube.com/watch?v=Jrm1RfTGRiY" target="_blank">
					<img src="https://i.ytimg.com/vi/Jrm1RfTGRiY/hqdefault.jpg" alt="ترفيه بلس - لقاء مع الفنانين">
					<div class="static-fallback-title">ترفيه بلس - لقاء مع الفنانين</div>
				</a>
			</div>
		</div>
	</div>
</div>

<!-- Add a small script to ensure the loading indicator is properly displayed initially -->
<script>
	document.addEventListener('DOMContentLoaded', function() {
		// Ensure loading indicator is visible initially
		var loadingIndicator = document.getElementById('youtube-loading');
		if (loadingIndicator) {
			loadingIndicator.style.display = 'flex';
		}

		// Clear any stale YouTube cache that might be causing issues
		try {
			const cacheKeys = Object.keys(localStorage).filter(key => key.startsWith('youtube-videos-'));
			if (cacheKeys.length > 0) {
				console.log('Clearing stale YouTube cache:', cacheKeys);
				cacheKeys.forEach(key => localStorage.removeItem(key));
			}
		} catch (e) {
			console.error('Error clearing cache:', e);
		}
		
		// Get the featuredVideo setting from the global variable set in script.js
		// Default to true if the global variable is not set
		var showFeaturedVideo = (typeof window.youtubeShowFeaturedVideo !== 'undefined') 
			? window.youtubeShowFeaturedVideo 
			: true;
		
		// Apply the same setting to the static fallback
		if (!showFeaturedVideo) {
			// If featured video is disabled, hide the featured video section
			var featuredVideo = document.querySelector('.static-fallback-featured');
			if (featuredVideo) {
				featuredVideo.style.display = 'none';
			}
			
			// Add the first video to the grid if featured video is disabled
			var firstVideo = document.createElement('div');
			firstVideo.className = 'static-fallback-item';
			firstVideo.innerHTML = `
				<a href="https://www.youtube.com/watch?v=Ks0Vk4jKkhk" target="_blank">
					<img src="https://i.ytimg.com/vi/Ks0Vk4jKkhk/hqdefault.jpg" alt="ترفيه بلس - حلقة جديدة">
					<div class="static-fallback-title">ترفيه بلس - حلقة جديدة</div>
				</a>
			`;
			
			// Add the first video to the beginning of the grid
			var grid = document.querySelector('.static-fallback-grid');
			if (grid) {
				grid.insertBefore(firstVideo, grid.firstChild);
			}
		}
	});
</script>